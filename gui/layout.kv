#: kivy 1.10.0
#: import TreeViewLabel kivy.uix.treeview.TreeViewLabel

WindowManager:
    MainWindow:
    DatabaseList:
    PassiveDataInspector:
    ActiveDataInspector:

<MainWindow>:
    name: "main_window"

    GridLayout:
        cols: 1

        Label:
            text: "NO-A - RTV & domestic electronics knowledge storage"

        GridLayout:
            rows: 2

            Button:
                text: "Database list"
                font_size: 24
                on_release:
                    app.root.current = "database_list"
                    root.manager.transition.direction = "left"

<DatabaseList>:
    name: "database_list"
    name_input: name_input

    db_preview: db_preview
    id_input: id_input

    GridLayout:
        cols: 1

        Label:
            text: "Database of all items\n ID - NAME"
            font_size: 24
            valign: 'top'
            halign: 'center'
            size_hint_y: None
            height: dp(96)
            text_size: root.width, dp(96)


        Label:
            id: db_preview
            text: "No database!"
            font_size: 18
            text_size: root.width, root.height-3*dp(48)-dp(96)
            size: self.texture_size
            valign: 'top'
            halign: 'center'
            markup: True
            on_ref_press:
                import webbrowser
                webbrowser.open(args[1])


        GridLayout:
            cols: 2
            size_hint_y: None
            height: dp(96)

            Label:
                text: "Type ID to proceed: "
                size_hint_y: None
                font_size: 24
                size_hint_y: None
                height: dp(48)
            TextInput:
                id: id_input
                text: "1"
                font_size: 32
                multiline: False
                size_hint_y: None
                height: dp(48)

            Label:
                text: "Type name to proceed: "
                size_hint_y: None
                font_size: 24
                size_hint_y: None
                height: dp(48)
            TextInput:
                id: name_input
                text: ""
                multiline: False
                font_size: 32
                multiline: False
                size_hint_y: None
                height: dp(48)


        GridLayout:
            cols: 3
            size_hint_y: None
            height: dp(48)

            Button:
                text: "Back to main screen"
                font_size: 24
                size_hint_y: None
                height: dp(48)
                on_release:
                    app.root.current = "main_window"
                    root.manager.transition.direction = "right"

            Button:
                text: "Create new"
                font_size: 24
                size_hint_y: None
                height: dp(48)
                on_release:
                    root.btn_create_new()
                    root.manager.transition.direction = "left"

            Button:
                text: "Data inspector"
                font_size: 24
                size_hint_y: None
                height: dp(48)
                on_release:
                    root.btn_inspect()
                    root.manager.transition.direction = "left"

<PassiveDataInspector>:
    name: "passive_data_inspector"


    item_id: item_id
    namee: namee
    producer: producer
    model: model
    serial_number: serial_number
    activation_date: activation_date
    acquire_date: acquire_date
    ports: ports
    other: other

    tutorials: tutorials

    GridLayout:
        cols: 1

        GridLayout:
            cols: 2

            Label:
                text: "[b]ID[/b]"
                markup: True
            Label:
                id: item_id
                multiline: False


            Label:
                text: "Name"
            TextInput:
                id: namee
                multiline: False

            Label:
                text: "Producer"
            TextInput:
                id: producer
                multiline: False

            Label:
                text: "Model"
            TextInput:
                id: model
                multiline: False

            Label:
                text: "Serial number"
            TextInput:
                id: serial_number
                multiline: False

            Label:
                text: "Activation date"
            TextInput:
                id: activation_date
                multiline: False

            Label:
                text: "Acquire date"
            TextInput:
                id: acquire_date
                multiline: False

            Label:
                text: "Ports"
            TextInput:
                id: ports
                multiline: False

            Label:
                text: "Other"
            TextInput:
                id: other
                multiline: False

        GridLayout:
            cols: 2
            GridLayout:
                cols: 1

                Button:
                    text: "Save"
                    on_release:
                        root.btn_save()

                Button:
                    text: "Delete"
                    on_release:
                        root.btn_delete()
                        root.manager.transition.direction = "right"

                Button:
                    text: "Back"
                    on_release:
                        app.root.current = "database_list"
                        root.manager.transition.direction = "right"

            GridLayout:
                cols: 1

                Label:
                    text: "Available tutorials"
                    font_size: 24
                    valign: 'top'
                    halign: 'center'
                    size_hint_y: None
                    height: dp(48)
                    text_size: root.width, dp(48)

                Label:
                    id: tutorials
                    text: '[b]There are no tutorials for this item.[/b]\b [ref="TEST"]Linkacz[/ref]'
                    text_size: root.width/2, root.height/2-2*dp(48)
                    size: self.texture_size
                    valign: 'top'
                    halign: 'left'
                    markup: True
                    on_ref_press:
                        root.enter_tutorial(args[1])
                        root.manager.transition.direction = "up"

                Button:
                    text: "Add new"
                    font_size: 24
                    height: dp(48)
                    size_hint_y: None
                    on_release:
                        root.btn_new_tutorial()




<ActiveDataInspector>:
    name: "active_data_inspector"

    text_title: text_title
    text_input: text_input
    text_preview: text_preview

    GridLayout:
        cols: 2

        GridLayout:
            rows: 2

            GridLayout:
                cols: 2
                size_hint_y: None
                height: dp(32)

                Label:
                    text: '[b]Title:[/b]'
                    size_hint_y: None
                    size_hint_x: None
                    height: dp(32)
                    width: root.width/16
                    markup: True
                TextInput:
                    id: text_title
                    size_hint_y: None
                    height: dp(32)
                    text: "Name of the article."
                    markup: True


            TextInput:
                id: text_input
                multiline: True
                text_size: root.width/2, root.height-2*dp(48)-dp(32)

        GridLayout:
            rows: 2

            Label:
                size_hint_y: None
                height: dp(32)
                text: "[b]Preview: [/b]"
                markup: True
            Label:
                id: text_preview
                text: "[b]TEST[/b]"
                text_size: root.width/2, root.height-2*dp(48)-dp(32)
                size: self.texture_size
                valign: 'top'
                halign: 'left'
                markup: True
                on_ref_press:
                    import webbrowser
                    webbrowser.open(args[1])


        Button:
            text: "Preview"
            font_size: 32
            size_hint_y: None
            height: dp(48)
            on_press: root.btn_preview()

        Button:
            text: "Save"
            font_size: 32
            size_hint_y: None
            height: dp(48)
            on_press: root.btn_save()

        Button:
            text: "Return"
            font_size: 32
            size_hint_y: None
            height: dp(48)
            on_press:
                app.root.current = "passive_data_inspector"
                root.manager.transition.direction = "down"

        Button:
            text: "Delete"
            font_size: 32
            size_hint_y: None
            height: dp(48)
            on_press:
                root.btn_delete()
                root.manager.transition.direction = "down"